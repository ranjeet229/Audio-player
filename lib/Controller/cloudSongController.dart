
import 'package:audio_player/Model/MySongModel.dart';
import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:flutter/material.dart';
import 'package:get/get.dart';

class CloudSongController extends GetxController{
  final db=FirebaseFirestore.instance;

  RxList<MySongModel> cloudSongList =RxList<MySongModel>([]);
  RxList<MySongModel> TredingSongList =RxList<MySongModel>([]);

  @override
  void onInit() {
    getcloudSong();
    super.onInit();
  }
  void uploadSongToDB() async{
    MySongModel newSong=MySongModel(
      id: 2,
      title: "Sajni",
      artist: "Arijit Singh",
      album: "album",
      albumArt: "data:image/jpeg;base64,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",
      data:   "https://firebasestorage.googleapis.com/v0/b/music-9c05a.appspot.com/o/Sajni%20(Lyrical%20Video)_%20Arijit%20Singh%2C%20Ram%20Sampath%20_%20Laapataa%20Ladies%20_%20%20Aamir%20Khan%20Productions%20(320).mp3?alt=media&token=0b05994f-bd6b-4cb5-8d05-880881d4382b"
      );

    await db.collection("trending").add(newSong.toJson());
    print("datebase uploaded successfully");
  }

  void getcloudSong() async{
    cloudSongList.clear();
    await db.collection("songs").get().then((value){
      value.docs.forEach((element) {
        cloudSongList.add(MySongModel.fromJson(element.data()));
      });
    });
    await db.collection("trending").get().then((value){
      value.docs.forEach((element) {
        TredingSongList.add(MySongModel.fromJson(element.data()));
      });
    });
  }

}